
pax-create-project -g examples -a spring-osgi-example

cd spring-osgi-example

pax-add-repository -i spring-osgi -u http://static.springframework.org/maven2-snapshots
pax-add-repository -i spring -u http://s3.amazonaws.com/maven.springframework.org/milestone

OLD_CONSTRUCT_OPTIONS="${PAX_CONSTRUCT_OPTIONS}"
PAX_CONSTRUCT_OPTIONS="-DaddVersion -DtargetDirectory=wrappers ${OLD_CONSTRUCT_OPTIONS}"
export PAX_CONSTRUCT_OPTIONS

pax-wrap-jar -g backport-util-concurrent -a backport-util-concurrent -v 3.0 -- "-DimportPackage=sun.misc;resolution:=optional,*"
pax-wrap-jar -g commons-logging -a commons-logging -v 1.1 -- "-DimportPackage=org.apache.commons.*,*;resolution:=optional"
pax-wrap-jar -g commons-collections -a commons-collections -v 3.2

pax-wrap-jar -g asm -a asm -v 2.2.3
pax-wrap-jar -g aopalliance -a aopalliance -v 1.0
pax-wrap-jar -g junit -a junit -v 3.8.1

PAX_CONSTRUCT_OPTIONS="${OLD_CONSTRUCT_OPTIONS}"

pax-import-bundle -g org.springframework -a spring-core -v 2.1-m3
pax-import-bundle -g org.springframework -a spring-context -v 2.1-m3
pax-import-bundle -g org.springframework -a spring-beans -v 2.1-m3

pax-import-bundle -g org.springframework.osgi -a spring-aop -v 2.1-osgi-m4-SNAPSHOT

pax-import-bundle -g org.springframework.osgi -a spring-osgi-io -v 1.0-m3-SNAPSHOT
pax-import-bundle -g org.springframework.osgi -a spring-osgi-core -v 1.0-m3-SNAPSHOT
pax-import-bundle -g org.springframework.osgi -a spring-osgi-extender -v 1.0-m3-SNAPSHOT

pax-import-bundle -g org.springframework.osgi.samples -a weather-dao -v 1.0-m3-SNAPSHOT
pax-import-bundle -g org.springframework.osgi.samples -a weather-service -v 1.0-m3-SNAPSHOT

mvn clean install pax:provision

